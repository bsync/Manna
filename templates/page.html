<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
      <title>{% block title %}{% endblock %} - {{ page.title|safe }} </title>
      {% for css in page.css: %}
         <link rel="stylesheet" type="text/css" href="{{css}}"> 
      {% endfor %}
      {% for script in page.scripts: %}
         <script src="{{script}}"></script>
      {% endfor %}
      <style>{{page.style}}</style>
   </head>
   <body>
      <section class="header" 
          style="center; width: 100%; ">
          {% block header %}
          <h3 class="title"><a href='/'>{{ page.site_name}}</a> : {{ page.title|safe }}</h3>
          {% endblock %}
      </section>
      <section class="status" style="center; background-color: black; color: red;">
        {% for message in get_flashed_messages() %}
        <h3>{{message}}</h3>
        {% endfor %}
      </section>
      <section class="content">
        {% block content %}
         {% for name, rstr in prerendered %}
            {{ rstr | safe }}
         {% endfor %}
        {% endblock %}
      </section>
      <section class="footer" 
               style="text-align: center; width: 100%; display: flex; justify-content: space-between;">
            <a href="{{ url_for('list_latest') }}">Latest</a>
            <a href="{{ url_for('show_catalog_page') }}" onclick="shift_edit(event, this)">Catalog</a>
            {% if current_user.is_authenticated %}
	    <a href="{{ url_for('user.logout') }}" onclick="shift_edit(event, this)">Logout {{ current_user }} </a>
            {% else %}
	    <a href="{{ url_for('user.login') }}" onclick="shift_edit(event, this)">Login/Register {{ current_user }}</a>
            {% endif %}
            <a href="/">Back to the Front!</a>
      </section>
      <script>
         function shift_edit(event, slink) { 
            if (event.shiftKey)
               event.preventDefault();
               lref = slink.href + '\/edit';
               lref = lref.replace('/latest/', '/');
               window.location.href = lref;
               return false; 
         } 
         $(document).ready(function() { 
          {{ page.scriptage | safe }} 
         })
      </script>
   </body>
</html>
